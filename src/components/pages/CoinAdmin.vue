<template>  <div class="block">    <v-Breadcrumb :post="bread"></v-Breadcrumb>    <div class="box">      <el-form ref="form" :inline="true" :model="form" label-width="60px" class="box_form">        <el-form-item label="账号:">          <el-input v-model="form.loginName" size="small"></el-input>        </el-form-item>        <el-form-item label="角色:">          <el-select v-model="form.userType" placeholder="请选择" size="small">            <el-option label="全部" value=""></el-option>            <el-option label="一级代理" value="6"></el-option>            <el-option label="二级代理" value="7"></el-option>            <el-option label="终端用户" value="8"></el-option>          </el-select>        </el-form-item>        <el-form-item style="margin-left: 20px;">          <el-button type="primary" size="small" @click="search">查询</el-button>          <el-button size="small" @click="reset">重置</el-button>        </el-form-item>      </el-form>      <div class="box_flex">        <div>          <!--<el-button size="small">批量审核</el-button>-->        </div>        <div class="btn_all">          <el-button-group size="small">            <el-button size="small" :class="{'active':active==0}" @click="tabClick(0)">全部</el-button>            <el-button size="small" :class="{'active':active==1}" @click="tabClick(1)">待审核</el-button>            <el-button size="small" :class="{'active':active==2}" @click="tabClick(2)">审核通过</el-button>            <el-button size="small" :class="{'active':active==3}" @click="tabClick(3)">未通过</el-button>          </el-button-group>        </div>      </div>      <div class="box_selected" v-if="multipleSelection.length>0">        <p><i class="el-icon-info"></i> 已选择 <span>{{multipleSelection.length}}</span> 项</p>      </div>      <el-table :data="tableData"          style="width: 100%"          class="table_list"          :default-sort="{prop: 'createDate', order: 'descending'}"          @selection-change="SelectionChange"          :header-cell-style="tableHeaderColor" border stripe>        <el-table-column type="selection" width="55"></el-table-column>        <el-table-column prop="loginName" label="账号"></el-table-column>        <el-table-column prop="userType" label="角色">          <template slot-scope="scope">            <span v-if="scope.row.userType==6">一级代理</span>            <span v-if="scope.row.userType==7">二级代理</span>            <span v-if="scope.row.userType==8">终端用户</span>          </template>        </el-table-column>        <el-table-column prop="totalAmount" label="提币数量" sortable></el-table-column>        <el-table-column prop="feeAmount" label="手续费" sortable></el-table-column>        <el-table-column prop="realAmount" label="实提数量" sortable></el-table-column>        <el-table-column prop="status" label="状态" sortable>          <template slot-scope="scope">            <span v-if="scope.row.authStatus==1">待审核</span>            <span v-if="scope.row.authStatus==2">审核通过</span>            <span v-if="scope.row.authStatus==3">未通过</span>          </template>        </el-table-column>        <el-table-column prop="createDate" label="创建时间" width="200" sortable></el-table-column>        <el-table-column label="操作" width="100">          <template slot-scope="scope">            <el-button @click="auditibi('shenhe',scope.row)" v-if="scope.row.authStatus==1" type="text">审核</el-button>            <el-button @click="auditibi('view',scope.row)" v-if="scope.row.authStatus==3" type="text">查看</el-button>          </template>        </el-table-column>      </el-table>      <v-Paging></v-Paging>      <el-dialog :title="Reviewtypes=='shenhe'?'审核':'查看'" :visible.sync="dialogVisible" width="35%" @close="close">        <el-form ref="form" :model="dialog_form" label-width="120px">          <el-form-item label="账号:">            <span>{{dialog_form.loginName}}</span>          </el-form-item>          <el-form-item label="角色:">            <span v-if="dialog_form.userType==6">一级代理</span>            <span v-if="dialog_form.userType==7">二级代理</span>            <span v-if="dialog_form.userType==8">终端用户</span>          </el-form-item>          <el-form-item label="提币数量:">            <span>{{dialog_form.totalAmount |numFormat}} USDT</span>          </el-form-item>          <el-form-item label="手续费:">            <span>{{dialog_form.feeAmount|numFormat}} USDT</span>          </el-form-item>          <el-form-item label="实提数量:">            <span>{{dialog_form.realAmount|numFormat}} USDT</span>          </el-form-item>          <el-form-item label="审核结果:" v-if="Reviewtypes=='shenhe'">            <el-radio-group v-model="dialog_form.resource">              <el-radio :label="2">同意</el-radio>              <el-radio :label="3">拒绝</el-radio>            </el-radio-group>          </el-form-item>          <el-form-item label="* 原因:" class="dialog_form_deg" prop="remark" v-if="Reviewtypes=='shenhe'&&dialog_form.resource==3">            <el-input type="textarea" :rows="3" v-model="dialog_form.reason" placeholder="请输入备注，不超过20字"></el-input>          </el-form-item>          <el-form-item label="查看原因:" v-if="Reviewtypes=='view'">            <span>{{dialog_form.reason?dialog_form.reason:'--'}}</span>          </el-form-item>        </el-form>        <span slot="footer" class="dialog-footer" v-if="Reviewtypes=='shenhe'">          <el-button @click="dialogVisible = false" size="small">取 消</el-button>          <el-button type="primary" @click="mentionaudit" size="small">确 定</el-button>        </span>      </el-dialog>    </div>  </div></template><script>	import vBreadcrumb from '@/components/common/Breadcrumb.vue';	import base from '@/components/common/base.vue';	export default {		mixins: [base],		components: {			vBreadcrumb		},		data() {			return {				bread: {					path: '/userAdmin',					data: '提币管理'				},				form: {					loginName: '',					userType: ''				},				dialog_form: {					reason: '',					resource: 2,					id: '',				},				rules: {					reason: [						{type: 'text', required: true, message: '请输入备注', trigger: 'change'}					]				},				options: [],				multipleSelection: [],				value: '',				dialogVisible: false,				active: 0,				Reviewtypes: 'shenhe'			}		},		methods: {			close() {				this.Reviewtypes = 'shenhe';				this.dialog_form = {					remark: '',					resource: 2,					id: ''				};			},			search() {				this.getData();			},			reset() {				this.form.loginName = '';				this.form.userType = '';				this.$store.dispatch('initiValue');				this.getData()			},			auditibi(type, table) {				this.Reviewtypes = type;				this.dialog_form = {					...table,					resource: this.dialog_form.resource				};				this.dialogVisible = true;			},			tabClick(index) {				this.active = index;				let page = {					page: 1,					perPage: 10,				};				this.$store.dispatch('changePager', page);				this.getData();			},			SelectionChange(val) {				this.multipleSelection = val;			},			getData() {				let params = {					pageNo: this.pager.page,					pageSize: this.pager.perPage,				};				if (this.active > 0) {					params.authStatus = this.active				}				if (this.form.loginName) {					params.loginName = this.form.loginName				}				if (this.form.userType) {					params.userType = this.form.userType				}				this.RestClient('GET_LIST', '/wallet/outgo/list', params).then((res) => {					if (res.data.code == 200) {						this.$store.dispatch('tableData',res.data.data)					}				})			},			mentionaudit() {				if (this.dialog_form.resource == 3) {					if (!this.dialog_form.reason) {						this.$message({							message: '请输入拒绝的理由！'						});						return;					}				};				let params = {					id: this.dialog_form.id,					authStatus: this.dialog_form.resource,					reason: this.dialog_form.reason				};				this.RestClient('CREATE', '/wallet/outgo/auth', params).then((res) => {					if (res.data.code == 200) {						this.$message({							message: '审核完成！',							type: 'success'						});						this.dialogVisible = false;						this.getData()					}				})			},			// 接收子页面数据			parentSay(msg) {				// this.getData()			}		}	}</script><style lang="scss" scoped>  .block {    .block_top {      background: #fff;      height: 70px;      padding: 15px;      .column {        padding-top: 10px;      }    }    .box {      font-size: 14px;      color: rgb(64, 69, 72);      margin-top: 20px;      background: #fff;      padding: 20px;      .box_flex {        font-size: 14px;        display: flex;        justify-content: space-between;        .btn_all {          display: table-cell;          vertical-align: middle;          span {            padding: 6px 15px;            border: 1px solid #DCDFE6;            margin-right: 1px;            border-radius: 3px;            color: rgb(105, 105, 105);          }          .active {            color: rgb(25, 120, 254);            border: 1px solid #409EFF;          }        }      }      .box_selected {        margin-top: 20px;        padding: 8px;        background: rgb(224, 246, 255);        border: 1px solid rgb(173, 225, 254);        i, span {          color: rgb(25, 120, 254);        }      }      .table_list {        margin-top: 20px;      }    }  }</style>