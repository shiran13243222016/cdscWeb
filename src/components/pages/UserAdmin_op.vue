<template>  <div class="block">    <v-Breadcrumb :post="bread"></v-Breadcrumb>    <div class="box">      <el-form :inline="true" label-width="80px" class="box_form">        <el-form-item label="用户账号:">          <el-input v-model="filter.account" size="small"></el-input>        </el-form-item>        <el-form-item label="状态:">          <el-select v-model="filter.state" placeholder="请选择" size="small">            <el-option              v-for="item in options"              :key="item.value"              :label="item.label"              :value="item.value">            </el-option>          </el-select>        </el-form-item>        <el-form-item>          <el-button type="primary" size="small" @click="getData('init')">查询</el-button>          <el-button size="small" @click="reset">重置</el-button>        </el-form-item>      </el-form>      <div class="box_operating">        <!--<el-button size="small">全部导出</el-button>-->      </div>      <el-table :data="tableData" :header-cell-style="tableHeaderColor" :default-sort="{prop:'create_date',order:'ascending'}" border stripe>        <el-table-column prop="login_name" label="用户账号" min-width="150" show-overflow-tooltip></el-table-column>        <el-table-column prop="nickname" label="用户昵称" width="120"></el-table-column>        <el-table-column prop="minerCount" label="设备总数" width='100'></el-table-column>        <el-table-column prop="yesterdayProfit" label="昨日收益" width="150"></el-table-column>        <el-table-column prop="status" label="状态" width="100">          <template slot-scope="scope">            <span v-if="scope.row.status==1">正常</span>            <span v-if="scope.row.status==2">停用</span>          </template>        </el-table-column>        <el-table-column prop="create_date" label="创建时间" width="180" sortable></el-table-column>        <el-table-column label="操作" width="150">          <template slot-scope="scope">            <el-button @click="handleClick(scope.row)" type="text">查看</el-button>            <el-dropdown class="box_table_drop">              <span>                <el-button type="text" class="el-dropdown-link">更多<i class="el-icon-arrow-down el-icon--right"></i></el-button>              </span>              <el-dropdown-menu slot="dropdown">                <el-dropdown-item @click.native="supply(scope.row)">补币</el-dropdown-item>                <el-dropdown-item @click.native="profit(scope.row)">收益比</el-dropdown-item>                <el-dropdown-item @click.native="resetpass(scope.row)">重置密码</el-dropdown-item>                <el-dropdown-item @click.native="disuse(scope.row)" v-if="scope.row.status == 1">停用</el-dropdown-item>                <el-dropdown-item @click.native="disuse(scope.row)" v-if="scope.row.status == 2">启用</el-dropdown-item>              </el-dropdown-menu>            </el-dropdown>          </template>        </el-table-column>      </el-table>      <v-Paging></v-Paging>      <vProfitSupply ref="ProfitSupply" @childSay="parentSay"></vProfitSupply>      <vOruse ref="Oruse" @childSay="parentSay"></vOruse>    </div>  </div></template><script>	import vBreadcrumb from '@/components/common/Breadcrumb.vue';	import vProfitSupply from  '@/components/common/Dialog/ProfitSupply.vue'	import vOruse from '@/components/common/Dialog/Oruse.vue'	import base from '@/components/common/base.vue'	import _ from 'lodash'	export default {		mixins: [base],		components: {			vBreadcrumb,			vProfitSupply,			vOruse		},		data() {			return {				bread: {					path: '/userAdmin',					data: '用户管理'				},				filter: {					account: '',					state: ''				},				options: [					{value: '', label: '全部'},					{value: '1', label: '正常'},					{value: '2', label: '停用'}				],			}		},		methods: {			// 重置			reset(){				this.filter.state= '';				this.filter.account= '';				this.$store.dispatch('initiValue');				this.getData()			},			// 查询 获取用户列表			getData(e) {				let params = {					userType: '8',					loginName: this.filter.account,					status: this.filter.state,					pageNo: this.pager.page,					pageSize: this.pager.perPage				};				(e=='init')?this.$store.dispatch('initiValue'):'';				params =_.omitBy(params,(value)=>{return _.isUndefined(value) || _.isNull(value) || value === ""});				this.RestClient('GET_LIST', '/user/list', params).then((res) => {					this.$store.dispatch('tableData',res.data.data);				})			},			// 获取点击表哥列表			handleClick(row) {				this.$router.push({					path: 'LookUser',					query: {						id: row.id,						name:            row.login_name					}				})			},			parentSay(code) {				if(code==200){					this.getData();				}			},			// open补币			supply(row){				let parentDate = {					show: 'supply',					id: row.id,					user: row.login_name				};				this.$refs.ProfitSupply.param(parentDate)			},			// open停用			disuse(row) {				this.$prompt('请输入安全密码', '提示', {					confirmButtonText: '确定',					cancelButtonText: '取消',					inputPattern: /^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$).{8,20}$/,					inputType: 'password',					inputErrorMessage: '密码需8~20位，不能为纯数字和纯字母'				}).then(({ value }) => {					const urls= '/user/stop';					let params={						id: row.id,						safePassword: value					};					this.RequestAjax('GET_LIST',urls,params)				}).catch(()=>{					this.$message({						type: 'info',						message: '取消输入'					});				});			},			resetpass(row) {				this.$prompt('请输入安全密码,重置后的密码为Abcd1234', '提示', {					confirmButtonText: '确定',					cancelButtonText: '取消',					inputPattern: /^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$).{8,20}$/,					inputType: 'password',					inputErrorMessage: '密码需8~20位，不能为纯数字和纯字母'				}).then(({ value }) => {					const urls= '/user/resetPassword';					let params={						id: row.id,						safePassword: value					};					this.RequestAjax('GET_LIST',urls,params)				}).catch(()=>{					this.$message({						type: 'info',						message: '取消输入'					});				});			},			//收益比			profit(row){				let parentDate = {					show: 'profit',					userId: row.id,					user: row.login_name				};				this.$refs.ProfitSupply.param(parentDate)			},			RequestAjax(type,url,params){				let that = this;				this.RestClient(type, url, params).then((res) => {					if(res.data.code == 200) {						this.$message({							message: res.data.message,							type: 'success'						});						that.getData();					}				})			}		}	}</script><style lang="scss" scoped>  .block {    .block_top {      background: #fff;      height: 70px;      padding: 15px;      .column {        padding-top: 10px;      }    }    .box {      margin-top: 20px;      background: #fff;      padding: 20px;      .box_form {        padding-top: 10px;      }    }    .el-dropdown-link {      margin-left: 10px;    }  }</style>