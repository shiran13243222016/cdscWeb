<template>  <div class="block">    <div class="block_top">      <div class="crumbs">        <el-breadcrumb separator="/">          <el-breadcrumb-item><i class="el-icon-lx-calendar"></i> 首页</el-breadcrumb-item>          <el-breadcrumb-item>提币</el-breadcrumb-item>        </el-breadcrumb>      </div>      <div class="column">        <h3>提币</h3>      </div>    </div>    <div class="box">      <el-form ref="form" :inline="true" label-width="80px" v-if="roles==2">        <el-form-item label="账号:">          <el-input v-model="filter.loginName" size="small"></el-input>        </el-form-item>        <el-form-item label="角色:">          <el-select v-model="filter.userType" placeholder="请选择" size="small">            <el-option label="全部" value=""></el-option>            <el-option label="二级代理" value="7"></el-option>            <el-option label="终端用户" value="8"></el-option>          </el-select>        </el-form-item>        <el-form-item>          <el-button type="primary" size="small" @click="getData('init')">查询</el-button>          <el-button size="small" @click="reset">重置</el-button>        </el-form-item>      </el-form>      <div class="box_flex">        <div style="width:100%;text-align:right">          <el-button type="primary" size="small" @click="dialogVisible = true">申请提币</el-button>        </div>        <!--<div class="btn_all">-->        <!--  <el-button-group size="small">-->        <!--    <el-button size="small" :class="{'active':active==0}" @click="tabClick(0)">全部</el-button>-->        <!--    <el-button size="small" :class="{'active':active==1}" @click="tabClick(1)">待审核</el-button>-->        <!--    <el-button size="small" :class="{'active':active==2}" @click="tabClick(2)">审核通过</el-button>-->        <!--    <el-button size="small" :class="{'active':active==3}" @click="tabClick(3)">未通过</el-button>-->        <!--   </el-button-group>-->        <!--</div>-->      </div>      <el-table :data="tableData"                style="width: 100%"                class="demo-table"                :default-sort="{prop: 'date', order: 'descending'}"                :header-cell-style="tableHeaderColor" border stripe>        <el-table-column prop="loginName" label="账号" v-if="roles==2"></el-table-column>        <el-table-column prop="totalAmount" label="币数量"></el-table-column>        <el-table-column prop="userType" label="角色" v-if="roles==2">          <template slot-scope="scope">            <span v-if="scope.row.userType==6">一级代理</span>            <span v-if="scope.row.userType==7">二级代理</span>            <span v-if="scope.row.userType==8">终端用户</span>          </template>        </el-table-column>        <el-table-column prop="feeAmount" label="手续费"></el-table-column>        <el-table-column prop="realAmount" label="实提数量"></el-table-column>        <el-table-column prop="status" label="状态">          <template slot-scope="scope">            <span v-if="scope.row.authStatus==1">待审核</span>            <span v-if="scope.row.authStatus==2">审核通过</span>            <span v-if="scope.row.authStatus==3">审核未通过</span>          </template>        </el-table-column>        <el-table-column prop="createDate" label="创建时间" width="200"></el-table-column>        <el-table-column label="操作" width="200">          <template slot-scope="scope">            <el-button type="text" @click="auditibi(scope.row)">查看</el-button>          </template>        </el-table-column>      </el-table>      <v-Paging></v-Paging>      <!--新增代理弹出框-->      <el-dialog title="申请提币" :visible.sync="dialogVisible" width="35%">        <el-form ref="form" :rules="rules" :model="form" label-width="120px">          <el-form-item label="可提资产:">            <span>{{balance |numFormat}} USDT</span>          </el-form-item>          <el-form-item label="提币数量:" class="dialog_form_deg" prop="number">            <el-input v-model="form.amount" placeholder="请输入"></el-input>          </el-form-item>          <el-form-item label="安全密码:" class="dialog_form_deg" prop="safePassword">            <el-input type="password" v-model="form.safePassword" placeholder="请输入"></el-input>          </el-form-item>        </el-form>        <span slot="footer" class="dialog-footer">          <el-button @click="dialogVisible = false" size="small">取 消</el-button>          <el-button type="primary" @click="outgo" size="small">确 定</el-button>        </span>      </el-dialog>    </div>  </div></template><script>	import base from '@/components/common/base.vue';	export default {		mixins: [base],		data() {			return {				filter: {					loginName: '',					userType: ''				},				form: {					amount: '',					safePassword: ''				},				rules: {					amount: [						{type: 'number', required: true, message: '请输入提币数量', trigger: 'change'}					],				},				dialogVisible: false,				active: 0,				balance: 0			}		},		computed: {			loginName() {				return this.$store.state.loginName;			},			roles() {				if (this.$store.state.userInfo && this.$store.state.userInfo.userInfo) {					return this.$store.state.userInfo.userInfo.roleType;				}			}		},		created() {			this.getDetail()		},		methods: {			reset() {				this.filter.loginName = "";				this.filter.userType = "";				this.$store.dispatch('initiValue');				this.getData()			},			tabClick(index) {				this.active = index;				this.getData()			},			auditibi(table) {				this.form = {					...table				};				this.dialogVisible = true;			},			outgo() {				let params = {					amount: this.form.amount,					safePassword: this.form.safePassword				};				if (this.filter.amount > this.balance) {					this.$message({						message: '提币数量超过可提数量',						type: 'info'					});					return;				}				this.RestClient('CREATE', '/wallet/outgo', params).then((res) => {					if (res.data.code == 200) {						this.$message({							message: '申请提币成功!'						})					}				})			},			getData(e) {				let params = {					loginName: this.filter.loginName,					userType: this.filter.userType,					pageNo: this.pager.page,					pageSize: this.pager.perPage				};				(e=='init')?this.$store.dispatch('initiValue'):'';				params = _.omitBy(params,(value)=>{return _.isUndefined(value) || _.isNull(value) || value === ""});				this.RestClient('GET_LIST', '/wallet/outgo/list', params).then((res) => {					if (res.data.code == 200) {						this.$store.dispatch('tableData',res.data.data);					}				})			},			getDetail() {				this.RestClient('GET_BASE', '/wallet/detail').then((res) => {					this.balance = res.data.balance				})			}		}	}</script><style lang="scss" scoped>  .block {    .block_top {      background: #fff;      height: 70px;      padding: 15px;      .column {        padding-top: 10px;      }    }    .box {      font-size: 14px;      color: rgb(64, 69, 72);      margin-top: 20px;      background: #fff;      padding: 20px;      .box_flex {        font-size: 14px;        display: flex;        justify-content: space-between;        .btn_all {          span {            padding: 6px 15px;            border: 1px solid #DCDFE6;            margin-right: 1px;            border-radius: 3px;            color: rgb(105, 105, 105);          }          .active {            color: rgb(25, 120, 254);            border: 1px solid #409EFF;          }        }      }      .box_selected {        margin-top: 20px;        padding: 8px;        background: rgb(224, 246, 255);        border: 1px solid rgb(173, 225, 254);        i, span {          color: rgb(25, 120, 254);        }      }      .demo-table {        margin-top: 20px;      }    }  }</style>